<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Úkol 5 — pexeso</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            font-family: 'Anton', sans-serif;
            text-align: center;
            color: var(--white);
            margin-bottom: 20px;
            font-size: 2.5em;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .subtitle {
            text-align: center;
            color: var(--white);
            margin-bottom: 30px;
            font-size: 1.2em;
        }

        .divider {
            height: 3px;
            background: var(--white);
            margin: 0 auto 30px;
            width: 100px;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            color: var(--white);
            font-size: 1.2em;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 0 auto;
            max-width: 600px;
        }

        .card {
            aspect-ratio: 1;
            perspective: 1000px;
            cursor: pointer;
            user-select: none;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card.matched {
            opacity: 0.7;
            cursor: default;
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
        }

        .card-front {
            background: var(--blue);
            border: 2px solid var(--white);
            color: var(--white);
            transform: rotateY(180deg);
            overflow: hidden;
        }

        .card-back {
            background: var(--black);
            border: 2px solid var(--white);
            color: var(--white);
            font-size: 2em;
        }

        .card img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .message {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            display: none;
            font-size: 1.2em;
        }

        .success {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
            border: 2px solid #4caf50;
        }

        .timer {
            color: var(--white);
            font-size: 1.2em;
            text-align: center;
            margin: 10px 0;
        }

        @media (max-width: 600px) {
            .game-board {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }
            
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="hero">
            <div class="hero-content">
                <h1>SAMETOVÉ PEXESO</h1>
                <p class="subtitle">Najděte dvojice pojmů z doby Sametové revoluce</p>
                <div class="divider"></div>
            </div>
        </header>

        <main class="content">
            <div class="game-info">
                <div>Čas: <span id="time">00:00</span></div>
                <div>Dvojice: <span id="pairs">0/8</span></div>
            </div>
            
            <div class="game-board" id="gameBoard">
                <!-- Cards will be inserted here by JavaScript -->
            </div>

            <div id="message" class="message"></div>
        </main>
    </div>

    <script>
        // Game data - pairs of [text, imageUrl]
        const cardPairs = [
            {
                text: "Klíč",
                image: "https://raw.githubusercontent.com/eliskaksthov/samet/refs/heads/main/kl%C3%AD%C4%8De.jpg"
            },
            {
                text: "Václav Havel",
                image: "https://raw.githubusercontent.com/eliskaksthov/samet/refs/heads/main/havel.jpg"
            },
            {
                text: "Policie",
                image: "https://raw.githubusercontent.com/eliskaksthov/samet/refs/heads/main/policie.jpg"
            },
            {
                text: "Komunistická strana Československa",
                image: "https://raw.githubusercontent.com/eliskaksthov/samet/refs/heads/main/ks%C4%8D.png"
            },
            {
                text: "Občanské fórum",
                image: "https://raw.githubusercontent.com/eliskaksthov/samet/refs/heads/main/obcansk%C3%A9%20forum.jpg"
            },
            {
                text: "Česká a Slovenská Federativní Republika",
                image: "https://raw.githubusercontent.com/eliskaksthov/samet/refs/heads/main/%C4%8Deskaaslovenskafedrep.jpg"
            },
            {
                text: "Demonstrace",
                image: "https://raw.githubusercontent.com/eliskaksthov/samet/refs/heads/main/demonstrace.jpg"
            },
            {
                text: "Svíčky",
                image: "https://raw.githubusercontent.com/eliskaksthov/samet/refs/heads/main/sv%C3%AD%C4%8Dky.jpg"
            }
        ];

        let cards = [];
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let matchedPairs = 0;
        let timer;
        let seconds = 0;

        // Create the game board
        function createBoard() {
            const gameBoard = document.getElementById('gameBoard');
            const cardsArray = [];
            
            // Create pairs of cards
            cardPairs.forEach((pair, index) => {
                // Text card
                cardsArray.push({
                    id: index * 2,
                    content: pair.text,
                    type: 'text',
                    pairId: index
                });
                
                // Image card
                cardsArray.push({
                    id: index * 2 + 1,
                    content: pair.image,
                    type: 'image',
                    pairId: index
                });
            });
            
            // Shuffle cards
            cards = shuffleArray(cardsArray);
            
            // Create card elements
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.index = index;
                
                cardElement.innerHTML = `
                    <div class="card-inner">
                        <div class="card-back">?</div>
                        <div class="card-front">
                            ${card.type === 'image' 
                                ? `<img src="${card.content}" alt="${card.content}">` 
                                : card.content}
                        </div>
                    </div>
                `;
                
                cardElement.addEventListener('click', flipCard);
                gameBoard.appendChild(cardElement);
            });
        }

        // Shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Flip card
        function flipCard() {
            if (lockBoard || this === firstCard || this.classList.contains('matched')) return;

            this.classList.add('flipped');

            if (!hasFlippedCard) {
                // First card
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            // Second card
            secondCard = this;
            checkForMatch();
        }

        // Check for match
        function checkForMatch() {
            const firstIndex = firstCard.dataset.index;
            const secondIndex = secondCard.dataset.index;
            const firstCardData = cards[firstIndex];
            const secondCardData = cards[secondIndex];

            const isMatch = firstCardData.pairId === secondCardData.pairId;

            if (isMatch) {
                disableCards();
                matchedPairs++;
                updatePairsCount();
                checkWin();
            } else {
                unflipCards();
            }
        }

        function disableCards() {
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');

            resetBoard();
        }

        function unflipCards() {
            lockBoard = true;

            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');

                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        function updatePairsCount() {
            document.getElementById('pairs').textContent = `${matchedPairs}/${cardPairs.length}`;
        }

        function checkWin() {
            if (matchedPairs === cardPairs.length) {
                clearInterval(timer);
                const message = document.getElementById('message');
                message.textContent = 'Skvělé! Získáváš písmeno Č';
                message.className = 'message success';
                message.style.display = 'block';
            }
        }

        // Timer
        function startTimer() {
            timer = setInterval(() => {
                seconds++;
                const minutes = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                document.getElementById('time').textContent = `${minutes}:${secs}`;
            }, 1000);
        }

        // Initialize the game
        document.addEventListener('DOMContentLoaded', () => {
            createBoard();
            updatePairsCount();
            startTimer();
        });
    </script>
</body>
</html>
